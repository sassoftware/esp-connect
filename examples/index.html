<!DOCTYPE html>
<html>
<head>

<title>ESP Connect  Examples</title>

<link rel="stylesheet" href="../style/connect.css" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../js/ui/main"></script>

<script type="text/javascript">

var _api = null;

function
esp(api)
{
    _api = api;

    _api.handleLayout();

    if (_api.hasParm("server"))
    {
        document.getElementById("server").value = _api.getParm("server");
        connect(encodeURI(_api.getParm("server")));
    }
    else
    {
        _api.getDialogs().pushModal("connect");
    }
}

function
go(example)
{
    var url = example;
    url += "?";
    url += "server=" + document.getElementById("server").value;

    var parms = _api.getParms();

    for (var x in parms)
    {
        if (x == "server")
        {
            continue;
        }

        url += "&";
        url += (x + "=" + parms[x]);
    }

    window.open(url);
}

function
connect(server)
{
    if (server == null)
    {
        server = encodeURI(document.getElementById("server").value);
    }

    _api.getDialogs().clearModals();

    document.getElementById("bannerTitle").innerHTML = "ESP Connect Examples (" + server + ")";

    _api.size();
}

</script>

<style type="text/css">
a
{
    text-decoration:none;
    color:black;
}

ul.examples a
{
    font-style:italic;
    text-decoration:underline;
}

</style>

</head>

<body>

    <div id="banner">
        <table style="width:100%" cellspacing="0" cellpadding="0">
            <tr>
                <td id="bannerTitle">ESP Connect Examples</td>
                <td class="icon">
                    <a class="icon" href="javascript:_api.getDialogs().pushModal('connect')">&#xf137;</a>
                </td>
            </tr>
        </table>
    </div>

    <div id="content">
        <ul class="examples">
            <li><a href="javascript:go('basic')">Basic</a> - Simple model that publishes mouse clicks into ESP.</li>
            <!--
            <li><a href="javascript:go('ballast')">Railroad Track Health</a> - Take a train trip through Australia looking for damaged tracks.</li>
            -->
            <li><a href="javascript:go('images')">Image Object Detection</a> - General image processing object detection example allowing you to process a video of your choosing.</li>
            <li><a href="javascript:go('paris')">A Trip through Paris</a> - A car trip through Paris showcasing ESP geofence windows with points of interest.</li>
            <li><a href="javascript:go('weather')">Weather</a> - Live weather data fed into an ESP model.</li>
            <li><a href="javascript:go('sailing')">Sailing</a> - Several sailboats sailing around the Firth of Forth and using geofencing to monitor activity in areas of interest.</li>
            <li><a href="javascript:go('../html/modelviewer.html')">Model Viewer</a> - Allows you to view ESP models either from a server or from a file.</li>
            <li><a href="javascript:go('../html/logviewer.html')">Log Viewer</a> - Allows you to view ESP server logs.</li>
        </ul>
    </div>

    <div id="footer">&nbsp;</div>

    <div id="connect" class="dialog" style="width:40%">

        <table class="dialogClose" style="width:100%" cellspacing="0" cellpadding="0">
            <tr><td class="icon"><a class="icon dialogTitle" href="javascript:_api.getDialogs().popModal('connect')">&#xf10c;</a></td></tr>
        </table>

        <div class="dialogTop">

            <div  class="dialogHeader">
                <div class="dialogTitle">
                    <table style="width:100%;border:0" cellspacing="0" cellpadding="0">
                        <tr>
                            <td><div class="dialogTitle">Connect to ESP Server</div></td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="dialogContent">
                <table border="0" style="width:100%;height:100%" cellspacing="0" cellpadding="0">
                    <tr>
                        <td class="dialogLabel">ESP Server:</td>
                    </tr>
                    <tr>
                        <td class="dialogValue"><input id="server" type="text" value="http://&lt;host&gt;:&lt;port&gt;"></input></td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="dialogButtons">
            <table style="width:100%">
                <tr>
                    <td class="dialogButton">
                        <span><button class="close" onclick="javascript:connect()">Connect</button></span>
                    </td>
                </tr>
            </table>
        </div>
    </div>


</body>

</html>
