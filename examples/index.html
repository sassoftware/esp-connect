<!DOCTYPE html>
<html>
<head>

<title>ESP Connect  Examples</title>

<link rel="stylesheet" href="../style/connect.css" />

<script type="module" src="../js/ui/main.js"></script>

<script type="text/javascript">

var _namespace = null;
var _server = null;
var _esp = null;

function
esp(api)
{
    _esp = api;

    var parms = _esp.getParms();

    if (parms.hasOwnProperty("namespace"))
    {
        _namespace = parms["namespace"];
    }

    _esp.handleLayout();

    _server = _esp.getServerFromParms(parms);

    if (_server != null)
    {
        connect(_server);
    }
    else
    {
        _esp.showConnectDialog({connect:connect});
    }
}

function
connect(server)
{
    _server = server;
    _esp.getDialogs().clearModals();
    document.getElementById("bannerTitle").innerHTML = "ESP Connect Examples (" + _server + ")";
    _esp.size();
}

function
go(example)
{
    var s = "";

    if (_namespace != null)
    {
        if (example == "../html/modelviewer.html" || example == "../html/logviewer.html")
        {
            s += "?k8s=true";
        }
        else
        {
            s += "?namespace=" + _namespace;
        }
    }
    else if (_server != null)
    {
        s += "?server=" + _server;
    }

    var parms = _esp.getParms();

    for (var x in parms)
    {
        if (x == "namespace" || x == "server")
        {
            continue;
        }

        s += ((s.length > 0) ? "&" : "?");
        s += (x + "=" + parms[x]);
    }

    var url = example;
    url += s;

    window.open(url);
}

</script>

<style type="text/css">
a
{
    text-decoration:none;
    color:black;
}

ul.examples a
{
    font-style:italic;
    text-decoration:underline;
}

</style>

</head>

<body>

    <div id="banner">
        <table style="width:100%" cellspacing="0" cellpadding="0">
            <tr>
                <td id="bannerTitle">ESP Connect Examples</td>
                <td class="icon">
                    <a class="icon" href="javascript:_esp.getDialogs().pushModal('connect')">&#xf137;</a>
                </td>
            </tr>
        </table>
    </div>

    <div id="content">
        <ul class="examples">
            <li><a href="javascript:go('basic')">Basic</a> - Simple model that publishes mouse clicks into ESP.</li>
            <!--
            <li><a href="javascript:go('ballast')">Railroad Track Health</a> - Take a train trip through Australia looking for damaged tracks.</li>
            -->
            <li><a href="javascript:go('trades')">Stock Trade Data</a> - Streaming trade data and broker violations.</li>
            <!--
            <li><a href="javascript:go('images')">Image Object Detection</a> - General image processing object detection example allowing you to process a video of your choosing.</li>
            -->
            <li><a href="javascript:go('paris')">A Trip through Paris</a> - A car trip through Paris showcasing ESP geofence windows with points of interest.</li>
            <li><a href="javascript:go('weather')">Weather</a> - Live weather data fed into an ESP model.</li>
            <li><a href="javascript:go('sailing')">Sailing</a> - Several sailboats sailing around the Firth of Forth and using geofencing to monitor activity in areas of interest.</li>
            <li><a href="javascript:go('turbine')">Wind Turbines</a> - Wind turbine data driving a custom display while processing turbine alerts.</li>
            <li><a href="javascript:go('../html/modelviewer.html')">Model Viewer</a> - Allows you to view ESP models either from a server or from a file.</li>
            <li><a href="javascript:go('../html/logviewer.html')">Log Viewer</a> - Allows you to view ESP server logs.</li>
        </ul>
    </div>

    <div id="footer">&nbsp;</div>

</body>

</html>
